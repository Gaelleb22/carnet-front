<h1>Créer une nouvelle recette</h1>

<form [formGroup]="myForm" novalidate (ngSubmit)="submit()" #form="ngForm">

  <div class="form-group">
    <label>Nom</label>
    <input formControlName="nom" type="text" placeholder="Baba au rhum">
    <small *ngIf="!myForm.controls.nom.valid" class="text-danger">
      Le nom doit contenir au moins 2 caractères.
    </small>
  </div>

  <fieldset>
    <legend>Informations générales</legend>

    <div class="form-group row">
        <label class="col-sm-2">Nombre de parts</label>
        <input formControlName="quantite" type="number" class="col-sm-2" placeholder="0">
        <select class="col-sm-2" formControlName="label">
          <option>Personne(s)</option>
          <option>Pot(s)</option>
          <option>Gâteau(x)</option>
        </select>
    </div>

  <div class="form-group">
    <label>Temps de préparation</label>
    <input type="number" formControlName="tempsPreparation" placeholder="45">
    <small class="form-text text-muted">Le temps est affiché en minutes.</small>
  </div>
  <div class="form-group">
    <label>Temps de cuisson</label>
    <input type="number" formControlName="tempsCuisson" placeholder="45">
    <small class="form-text text-muted">Le temps est affiché en minutes.</small>
  </div>
  <div class="form-group">
    <label>Classement</label>
    <div>
      <div class="form-check form-check-inline">
        <input formControlName="classement" class="form-check-input" type="radio" id="classement1" value="1">
        <label class="form-check-label" for="classement1">Bof</label>
      </div>
      <div class="form-check form-check-inline">
        <input formControlName="classement" class="form-check-input" type="radio" id="classement2" value="2">
        <label class="form-check-label" for="classement2">Ça pourrait être mieux avec...</label>
      </div>
      <div class="form-check form-check-inline">
        <input formControlName="classement" class="form-check-input" type="radio" id="classement3" value="3">
        <label class="form-check-label" for="classement3">C'est pas mal</label>
      </div>
      <div class="form-check form-check-inline">
        <input formControlName="classement" class="form-check-input" type="radio" id="classement4" value="4">
        <label class="form-check-label" for="classement4">À refaire absolument</label>
      </div>
      <div class="form-check form-check-inline">
        <input formControlName="classement" class="form-check-input" type="radio" id="classement5" value="5">
        <label class="form-check-label" for="classement5">J'en veux tous les jours</label>
      </div>
    </div>
  </div>
    <div class="form-group">
      <label>Statut</label>
      <div>
        <div class="form-check form-check-inline">
          <input formControlName="statut" class="form-check-input" type="radio" id="statut1" value="SECRET">
          <label class="form-check-label" for="statut1">Secret</label>
        </div>
        <div class="form-check form-check-inline">
          <input formControlName="statut" class="form-check-input" type="radio" id="statut2" value="PARTAGE">
          <label class="form-check-label" for="statut2">Partagée</label>
        </div>
      </div>
  </div>
</fieldset>

<!-- liste d'ingrédients -->
  <fieldset>
    <legend>Ingrédients</legend>
    <ng-container formArrayName="ingredients">
      <div *ngFor="let ingredient of ingredients.controls; let i=index">
        <ng-container [formGroupName]="i">
          <div class="row">
            <input type="text" formControlName="quantite" placeholder="250g">
            <input type="text" formControlName="nom" placeholder="chocolat">
            <button (click)="removeIngredient(i)">Supprimer</button>
          </div>
        </ng-container>

      </div>

      <button (click)="addIngredient()">Ajouter un ingrédient</button>
    </ng-container>
  </fieldset>


<!-- liste d'étapes-->

  <fieldset>
    <legend>Étapes de préparation</legend>
    <div formArrayName="etapes">

      <div *ngFor="let etape of etapes.controls; let i=index">
          <span>Etape {{i + 1}}</span>
          <textarea rows="4" cols="50" [formControlName]="i">
          </textarea><button (click)="removeEtape(i)">Supprimer</button>
      </div>
      <button (click)="addEtape()">Ajouter une étape</button>
    </div>

  </fieldset>

  <fieldset>
    <legend>Astuces</legend>
    <div formArrayName="astuces">
      <div *ngFor="let astuce of astuces.controls; let i=index">
        <span>Astuce {{i + 1}}</span>
        <textarea rows="4" cols="50" [formControlName]="i">
        </textarea><button (click)="removeAstuce(i)">Supprimer</button>
      </div>
      <button (click)="addAstuce()">Ajouter une astuce</button>
    </div>
  </fieldset>

  <button type="submit" [disabled]="!myForm.valid">Enregistrer</button>
</form>
